<section class="section section--positioned section-{{ section.id }}">
  <div class="container">
    <div class="box box--with-image">
      {%- capture section_title -%}
        <div class="box__image box__image--small image-background js-slideshow-cta">
            {%- for block in section.blocks -%}
            <div class="image-background__image js-slide slide-hide {% if forloop.index == 1 %}show{% endif %} lazyload" data-bg="{{ block.settings.image.src | img_url: '700x700' }})"></div>

          {%- endfor -%}
        </div>
      {%- endcapture -%}

      {%- capture section_content -%}
        <div class="box__content box__content--large-padding">
                      {%- if section.settings.header_text != blank -%}
          <h2 class="slideshow_cta_header">{{section.settings.header_text}}</h2>
          
                      {%- endif -%}

          <hr class="box__separator hidden-thumb">

          <div class="rte">
            {{ section.settings.content }}

            {%- if section.settings.button_text != blank -%}
              <a href="{{ section.settings.button_link }}" class="box__callout-button button button--primary">{{ section.settings.button_text | escape }}</a>
            {%- endif -%}
          </div>
        </div>
      {%- endcapture -%}

        {{ section_title }}
        {{ section_content }}
 
    </div>

  </div>
</section>

{% schema %}
{
  "name": "Slideshow CTA",
  "class": "shopify-section__featured-text",
  "settings": [
     {
          "type": "text",
          "id": "header_text",
          "label": "Header"
        },
    {
      "type": "richtext",
      "id": "content",
      "label": "Text",
      "default": "<p>Add your own custom content to give more information about your store, availability details...</p>"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    }

  ],
  "max_blocks": 5,
  "blocks": [
    {
      "type": "image",
      "name": "Image slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image",
          "info": "1560 x 1050px jpg recommended"
        },

        {
          "type": "text",
          "id": "subheading",
          "label": "Subheading"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Your slideshow",
          "info": "45 characters maximum"
        },
        {
          "type": "color",
          "id": "heading_color",
          "label": "Heading color",
          "default": "#000000"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button text"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "select",
          "id": "position",
          "label": "Text position",
          "info": "This setting is only applicable for the full-screen slideshow",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ],
          "default": "left"
        }
      ]
    }
    
  ],
  "presets": [
    {
      "category": "Text",
      "name": "Slideshow CTA"
    }
  ]
}
{% endschema %}